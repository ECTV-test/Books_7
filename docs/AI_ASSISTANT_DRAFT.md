# AI Assistant — черновик (концепт)

Цель: “помощник всегда рядом”, но без перегруза UI и без неконтролируемых затрат.

## 1) UX (как вызывать)

- **Long-press на слово** → popover: Translate / Bookmark / Explain / Examples
- **Long-press на строку или абзац** → поповер с кнопкой “Explain (paragraph)”
- Дополнительно: маленькая кнопка `?`/✨ рядом с плеером, чтобы открыть мини-чат.

## 2) Функции (минимальный набор)

1) Explain (простое объяснение)
2) Grammar hint (почему так построено)
3) Examples (2–3 примера на текущем уровне)
4) Paraphrase (сказать проще)

## 3) Лимиты и оплата

Рекомендуемая модель:
- Бесплатно: N запросов/день (например 10)
- Дальше: pay-as-you-go или пакет (100/500/1000)

Важно отделить:
- перевод/tts (хорошо кэшируются)
- помощник (уникальные запросы, кэш хуже)

## 4) API (через Worker gateway)

Добавляем endpoint, например `/explain`:

Запрос:
```json
{
  "text": "...",
  "lang": "uk",
  "level": "a2",
  "mode": "explain|grammar|examples|paraphrase",
  "context": { "bookId": "...", "sourceLang": "en", "targetLang": "uk" }
}
```

Ответ:
```json
{ "result": "..." }
```

## 5) Масштабирование и защита

- Auth token для приложения (чтобы не дергали чужие)
- Rate limit (per device/user)
- Логирование количества запросов
- Кэшировать можно только “типовые” ответы (например examples для одного и того же слова), но это опционально.

